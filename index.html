<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Calculadora de Metas y Gastos</title>
  <link rel="stylesheet" href="styles.css">
  <script defer src="app.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <button class="dark-mode-toggle" aria-label="Toggle Dark Mode">☀️</button>
  <div id="content" class="container">
    <header>
      <h1>Calculadora de Metas y Gastos</h1>
    </header>
    <main>
      <details open class="instructions">
        <summary><h2>Instrucciones de Uso</h2></summary>
        <ol>
          <li>Ingresa la <strong>Meta total ($)</strong>.</li>
          <li>Registra gastos fijos mensuales. Usa "Agregar gasto personalizado" si necesitas más.</li>
          <li>Ingresa tu <strong>Sueldo mensual ($)</strong> y datos de <strong>Venta de Productos</strong> (Costo y Precio).</li>
          <li>Ajusta las <strong>Operaciones mensuales</strong> con el slider.</li>
          <li>Revisa los <strong>Resultados</strong> y el gráfico.</li>
          <li>Alterna temas con el botón de <strong>Modo Oscuro</strong>.</li>
        </ol>
      </details>

      <details open class="meta-total-section">
        <summary><h2>Meta total</h2></summary>
        <div class="input-group meta-total">
          <label for="totalAmount">Meta total ($)</label>
          <input type="number" id="totalAmount" value="25000" step="0.01">
          <p class="explanatory">Define la meta total a alcanzar.</p>
        </div>
      </details>

      <details open class="expenses-section">
        <summary><h2>Gastos mensuales</h2></summary>
        <div class="input-group label-destacado">
          <label for="monthlyExpenses">Total Gastos ($)</label>
          <input type="number" id="monthlyExpenses" value="0" readonly>
        </div>
        <div class="sub-expenses" id="expensesContainer">
          <div><label>Alquiler</label><input type="number" id="rent" value="0" step="0.01"></div>
          <div><label>Comida</label><input type="number" id="food" value="0" step="0.01"></div>
          <div><label>Servicios</label><input type="number" id="services" value="0" step="0.01"></div>
          <div><label>Entretenimiento</label><input type="number" id="entertainment" value="0" step="0.01"></div>
        </div>
        <button class="btn-add-custom" id="addCustomExpense">Agregar gasto personalizado</button>
      </details>

      <details open class="income-section">
        <summary><h2>Ingresos</h2></summary>
        <div class="input-group label-destacado">
          <label for="salary">Sueldo mensual ($)</label>
          <input type="number" id="salary" value="0" step="0.01">
        </div>
        <div class="input-group label-destacado"><label>Venta de Productos</label></div>
        <div class="operation-row">
          <div class="left-column">
            <div class="profit-display">
              <div id="profitDisplay" class="profit-value">0$</div>
              <div class="profit-label">Ganancia por operación</div>
            </div>
          </div>
          <div class="right-column">
            <div class="operation-inputs">
              <div class="input-group normal-label">
                <label for="cost">Costo ($)</label>
                <input type="number" id="cost" value="0" step="0.01">
              </div>
              <div class="input-group normal-label">
                <label for="price">Precio ($)</label>
                <input type="number" id="price" value="0" step="0.01">
              </div>
            </div>
          </div>
        </div>
      </details>

      <details open class="operations-section">
        <summary><h2>Operaciones mensuales</h2></summary>
        <div class="slider-container label-destacado">
          <label for="operationsPerMonth">Cantidad</label>
          <input type="range" id="operationsPerMonth" value="50" min="1" max="1000" step="1">
          <div>Cantidad: <span id="operationsLabel">50</span></div>
        </div>
      </details>

      <details open class="results-section">
        <summary><h2>Resultados</h2></summary>
        <div class="results">
          <p>Estado: <span id="expenseStatus" class="insufficient">❌ Insuficiente</span></p>
          <p>Ganancia sobrante mensual: <span id="monthlyProfit">0</span>$</p>
          <p>Tiempo estimado:</p>
          <ul>
            <li><span id="monthsNeeded" class="highlight">0</span> meses</li>
            <li><span id="yearsNeeded" class="highlight">0</span> años</li>
          </ul>
        </div>
      </details>

      <details open class="chart-section">
        <summary><h2>Distribución de Gastos</h2></summary>
        <div class="chart-container">
          <div id="chartLegend"></div>
          <canvas id="expensesChart"></canvas>
        </div>
      </details>
    </main>
    <footer>
      <p class="highlight">Recuerda, lo importante es la constancia. ¡Tú puedes!</p>
    </footer>
  </div>
</body>
</html>